. Set team responsible for handling Icinga alerts
+
[source,bash]
----
# use lower case for team name.
# e.g. TEAM=tarazed
TEAM=<team-name>
----

. Prepare Terraform cluster config
+
[source,bash,subs="attributes+"]
----
CA_CERT=$(jq -r '.ignition.security.tls.certificateAuthorities[0].source' \
  "${INSTALLER_DIR}/master.ign" | \
  awk -F ',' '{ print $2 }' | \
  base64 --decode)

pushd "inventory/classes/${TENANT_ID}/"

yq eval -i ".parameters.openshift.infraID = \"$(jq -r .infraID "${INSTALLER_DIR}/metadata.json")\"" \
  ${CLUSTER_ID}.yml

yq eval -i ".parameters.openshift.clusterID = \"$(jq -r .clusterID "${INSTALLER_DIR}/metadata.json")\"" \
  ${CLUSTER_ID}.yml

yq eval -i ".parameters.openshift.baseDomain = \"${CLUSTER_DOMAIN}\"" \
  ${CLUSTER_ID}.yml

yq eval -i ".parameters.openshift4_terraform.terraform_variables.base_domain = \"${BASE_DOMAIN}\"" \
  ${CLUSTER_ID}.yml

yq eval -i ".parameters.openshift4_terraform.terraform_variables.ignition_ca = \"${CA_CERT}\"" \
  ${CLUSTER_ID}.yml

ifeval::["{provider}" == "exoscale"]
yq eval -i ".parameters.openshift4_terraform.terraform_variables.ssh_key = \"$(cat ${SSH_PUBLIC_KEY})\"" \
  ${CLUSTER_ID}.yml
endif::[]
ifeval::["{provider}" != "exoscale"]
yq eval -i ".parameters.openshift4_terraform.terraform_variables.ssh_keys = [\"$(cat ${SSH_PUBLIC_KEY})\"]" \
  ${CLUSTER_ID}.yml
endif::[]

yq eval -i ".parameters.openshift4_terraform.terraform_variables.hieradata_repo_user = \"${HIERADATA_REPO_USER}\"" \
  ${CLUSTER_ID}.yml

yq eval -i ".parameters.openshift4_terraform.terraform_variables.team = \"${TEAM}\"" \
  ${CLUSTER_ID}.yml

# Configure the OpenShift update channel
yq eval -i ".parameters.openshift4_version.spec.channel = \"stable-{ocp-minor-version}\"" \
  ${CLUSTER_ID}.yml

yq eval -i ".parameters.vshnLdap.serviceId = \"${LDAP_ID}\"" \
  ${CLUSTER_ID}.yml

----
+
[NOTE]
====
If you use a custom "apps" domain, make sure to set `parameters.openshift.appsDomain` accordingly.

[source,bash]
----
APPS_DOMAIN=your.custom.apps.domain
yq eval -i ".parameters.openshift.appsDomain = \"${APPS_DOMAIN}\"" \
  ${CLUSTER_ID}.yml
----
====

ifeval::["{provider}" == "exoscale"]
. Configure Exoscale-specific Terraform variables
+
[source,bash,subs="attributes+"]
----
yq eval -i ".parameters.openshift4_terraform.terraform_variables.rhcos_template = \"${RHCOS_TEMPLATE}\"" \
  ${CLUSTER_ID}.yml
----

endif::[]

[TIP]
====
You now have the option to further customize the cluster by editing `terraform_variables`.
Most importantly you have the option to change node sizes or add additional specialized worker nodes.

Please look at the xref:oc4:ROOT:references/{provider}/config.adoc[configuration reference] for the available options.
====
